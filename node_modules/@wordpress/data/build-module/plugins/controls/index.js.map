{"version":3,"sources":["@wordpress/data/src/plugins/controls/index.js"],"names":["applyMiddleware","mapValues","createMiddleware","registry","registerStore","reducerKey","options","store","controls","normalizedControls","control","isRegistryControl","middleware","enhancer","createStore","Object","assign","reducer","namespaces","supportControls"],"mappings":"AAAA;;;AAGA,SAASA,eAAT,QAAgC,OAAhC;AACA,SAASC,SAAT,QAA0B,QAA1B;AAEA;;;;AAGA,OAAOC,gBAAP,MAA6B,0BAA7B;AAEA,eAAe,UAAUC,QAAV,EAAqB;AACnC,SAAO;AACNC,IAAAA,aADM,yBACSC,UADT,EACqBC,OADrB,EAC+B;AACpC,UAAMC,KAAK,GAAGJ,QAAQ,CAACC,aAAT,CAAwBC,UAAxB,EAAoCC,OAApC,CAAd;;AAEA,UAAKA,OAAO,CAACE,QAAb,EAAwB;AACvB,YAAMC,kBAAkB,GAAGR,SAAS,CAAEK,OAAO,CAACE,QAAV,EAAoB,UAAEE,OAAF,EAAe;AACtE,iBAAOA,OAAO,CAACC,iBAAR,GAA4BD,OAAO,CAAEP,QAAF,CAAnC,GAAkDO,OAAzD;AACA,SAFmC,CAApC;AAGA,YAAME,UAAU,GAAGV,gBAAgB,CAAEO,kBAAF,CAAnC;AACA,YAAMI,QAAQ,GAAGb,eAAe,CAAEY,UAAF,CAAhC;;AACA,YAAME,WAAW,GAAG,SAAdA,WAAc;AAAA,iBAAMP,KAAN;AAAA,SAApB;;AAEAQ,QAAAA,MAAM,CAACC,MAAP,CACCT,KADD,EAECM,QAAQ,CAAEC,WAAF,CAAR,CAAyBR,OAAO,CAACW,OAAjC,CAFD;AAKAd,QAAAA,QAAQ,CAACe,UAAT,CAAqBb,UAArB,EAAkCc,eAAlC,GAAoD,IAApD;AACA;;AAED,aAAOZ,KAAP;AACA;AArBK,GAAP;AAuBA","sourcesContent":["/**\n * External dependencies\n */\nimport { applyMiddleware } from 'redux';\nimport { mapValues } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport createMiddleware from '@wordpress/redux-routine';\n\nexport default function( registry ) {\n\treturn {\n\t\tregisterStore( reducerKey, options ) {\n\t\t\tconst store = registry.registerStore( reducerKey, options );\n\n\t\t\tif ( options.controls ) {\n\t\t\t\tconst normalizedControls = mapValues( options.controls, ( control ) => {\n\t\t\t\t\treturn control.isRegistryControl ? control( registry ) : control;\n\t\t\t\t} );\n\t\t\t\tconst middleware = createMiddleware( normalizedControls );\n\t\t\t\tconst enhancer = applyMiddleware( middleware );\n\t\t\t\tconst createStore = () => store;\n\n\t\t\t\tObject.assign(\n\t\t\t\t\tstore,\n\t\t\t\t\tenhancer( createStore )( options.reducer )\n\t\t\t\t);\n\n\t\t\t\tregistry.namespaces[ reducerKey ].supportControls = true;\n\t\t\t}\n\n\t\t\treturn store;\n\t\t},\n\t};\n}\n"]}